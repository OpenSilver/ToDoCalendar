<UserControl x:Class="ToDoCalendarControl.MainControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:ToDoCalendarControl"
    mc:Ignorable="d"
    xmlns:metrostyleapps="clr-namespace:MetroStyleApps"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="White"
    d:DesignHeight="480" d:DesignWidth="480">
    <UserControl.Resources>
        <local:LocalizedStrings x:Key="ToDoCalendarControl_LocalizedStrings"/>
        <Storyboard x:Name="BugFixToKeepDisplayRefreshingWhileDragging">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="button" RepeatBehavior="Forever">
                <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="{StaticResource PhoneChromeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <metrostyleapps:DragAndDropRoot Grid.Row="1" ThresholdForScrollViewerAutomaticScroll="90" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
            <Grid Background="White">
                <ScrollViewer x:Name="MainScrollViewer" Grid.Row="0" BorderThickness="0" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" ManipulationMode="Control">
                    <Grid x:Name="MainContainer" ManipulationDelta="MainContainer_ManipulationDelta">
                        <StackPanel Orientation="Vertical" Background="Black">
                            <Button x:Name="button" FontSize="14" Padding="20,16,20,5" Foreground="#FFCCCCCC" HorizontalAlignment="Center" VerticalAlignment="Center" BorderThickness="0" Click="ButtonLoadMoreDaysBefore_Click" RenderTransformOrigin="0.5,0.5" Content="{Binding LocalizedResources.ButtonClickToSeeMore_Up_Text, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}">
                                <Button.RenderTransform>
                                    <CompositeTransform/>
                                </Button.RenderTransform>
                            </Button>
                            <StackPanel x:Name="DaysContainer" Orientation="Vertical" Background="White"/>
                            <Button FontSize="14" Padding="5,5,20,16" Foreground="#FFCCCCCC" HorizontalAlignment="Left" VerticalAlignment="Center" BorderThickness="0" Click="ButtonLoadMoreDaysAfter_Click" Content="{Binding LocalizedResources.ButtonClickToSeeMore_Down_Text, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}"/>
                        </StackPanel>
                        <local:EventOptions x:Name="EventOptionsControl" Margin="10,0,0,0" Visibility="Collapsed" VerticalAlignment="Top" HorizontalAlignment="Left"/>
                    </Grid>
                </ScrollViewer>
                <Grid x:Name="ButtonsOuterContainer" VerticalAlignment="Bottom" HorizontalAlignment="Center" Background="Transparent" Margin="0,0,0,1">
                    <Image Source="Images/main_button_background.png" Stretch="Fill" VerticalAlignment="Bottom" HorizontalAlignment="Center" Width="223" Height="165" Margin="0,0,0,-1"/>
                    <ScrollViewer x:Name="ScrollViewerToPreventMainScrollViewerFromScrolling" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Disabled">
                        <metrostyleapps:DragAndDropSource x:Name="DRAGSOURCE_NewEvent" DontCollapseDuringDrag="True" HorizontalAlignment="Center" Margin="0,28,0,10" DistanceForDragOperationToBeConsideredIntentional="50" Click="DragAndDropSource_Click" DragAndDropStarted="DragAndDropSource_DragAndDropStarted" DragAndDropStopped="DragAndDropSource_DragAndDropStopped">
                            <Grid Width="80" Height="80">
                                <Ellipse Fill="{StaticResource PhoneAccentBrush}"/>
                                <TextBlock Text="+" Padding="0" Margin="-19,-22,-21,5" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="96" FontWeight="Bold"/>
                            </Grid>
                        </metrostyleapps:DragAndDropSource>
                    </ScrollViewer>
                </Grid>
                <Grid x:Name="ExplanationOverlay" Margin="0,-150,0,150" Visibility="Collapsed" MouseLeftButtonDown="ExplanationOverlay_MouseLeftButtonDown" Background="Transparent">
                    <Grid IsHitTestVisible="False" Background="#BB000000" Margin="0,150,0,-150">
                        <Image Source="Images/arrow_for_explanation.png" Stretch="Fill" VerticalAlignment="Bottom" HorizontalAlignment="Center" Width="224" Height="512" Margin="0,0,0,-1"/>
                        <TextBlock MaxWidth="160" Margin="100,0,0,250" TextWrapping="Wrap" VerticalAlignment="Bottom" HorizontalAlignment="Center" Text="{Binding LocalizedResources.ExplanationForDragAndDrop_Text, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}" />
                    </Grid>
                </Grid>
                <Popup x:Name="PopupForOptions" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="50,-150,0,0">
                    <Border Background="{StaticResource PhoneAccentBrush}" CornerRadius="20">
                        <Border Background="#66000000" CornerRadius="20">
                            <Grid>
                                <Grid.Resources>
                                    <Style x:Key="OptionTextBlockStyle" TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="FontSize" Value="22"/>
                                        <Setter Property="TextWrapping" Value="Wrap"/>
                                        <Setter Property="TextAlignment" Value="Center"/>
                                    </Style>
                                    <Style x:Key="StyleForOptionsButtons" TargetType="Button">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="BorderBrush" Value="White"/>
                                    </Style>
                                </Grid.Resources>
                                <StackPanel Orientation="Vertical" Margin="50" MaxWidth="300">
                                    <TextBlock Text="{Binding LocalizedResources.OptionsTitle_Text, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}" Style="{StaticResource OptionTextBlockStyle}" TextAlignment="Left"/>
                                    <Button Click="ButtonSendBackupByEmail_Click" Style="{StaticResource StyleForOptionsButtons}">
                                        <TextBlock Text="{Binding LocalizedResources.OptionsButtonSendBackupByEmail_Content, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}" Style="{StaticResource OptionTextBlockStyle}"/>
                                    </Button>
                                    <Button Click="ButtonImportFromBackup_Click" Style="{StaticResource StyleForOptionsButtons}">
                                        <TextBlock Text="{Binding LocalizedResources.OptionsButtonRestoreBackup_Content, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}" Style="{StaticResource OptionTextBlockStyle}"/>
                                    </Button>
                                    <CheckBox x:Name="CheckBoxForDisablingAutoScreenOff" Click="CheckBoxForDisablingAutoScreenOff_Click">
                                        <TextBlock Text="{Binding LocalizedResources.OptionsCheckBoxForDisablingAutoScreenOff_Content, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}" Style="{StaticResource OptionTextBlockStyle}" TextAlignment="Left"/>
                                    </CheckBox>
                                </StackPanel>
                                <Button Content="X" HorizontalAlignment="Right" VerticalAlignment="Top" Click="ButtonClosePopupForOptions_Click" Style="{StaticResource StyleForOptionsButtons}"/>
                            </Grid>
                        </Border>
                    </Border>
                </Popup>
                <Popup x:Name="PopupForImportingFromBackup" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="50,-250,0,0">
                    <Border Background="{StaticResource PhoneAccentBrush}" CornerRadius="20">
                        <Border Background="#66000000" CornerRadius="20">
                            <Grid>
                                <StackPanel Orientation="Vertical" Margin="50" Width="300">
                                    <TextBlock TextWrapping="Wrap" Text="{Binding LocalizedResources.OptionsRestoreExplanation_Text, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}"/>
                                    <TextBox x:Name="TextBoxForImportingFromBackup" Height="200" AcceptsReturn="True" VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Disabled" TextWrapping="Wrap" FontSize="12"/>
                                    <Button HorizontalAlignment="Center" Click="ButtonStartImportingFromBackup_Click" Content="{Binding LocalizedResources.OptionsRestoreButtonGo_Content, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}"/>
                                </StackPanel>
                                <Button Content="X" HorizontalAlignment="Right" VerticalAlignment="Top" Click="ButtonClosePopupForImportingFromBackup_Click"/>
                            </Grid>
                        </Border>
                    </Border>
                </Popup>
                <Grid x:Name="ButtonForOptions" Width="40" Height="40" Margin="0,0,10,10" Background="Transparent" HorizontalAlignment="Right" VerticalAlignment="Bottom" MouseLeftButtonDown="ButtonForOptions_MouseLeftButtonDown">
                    <Path Data="F1M-515.802,331.242C-515.789,329.857,-515.923,328.495,-516.128,327.172L-510.578,322.745C-512.008,317.424,-514.756,312.655,-518.482,308.812L-525.111,311.322C-527.209,309.586,-529.594,308.195,-532.179,307.198L-533.233,300.195C-535.788,299.515 -538.464,299.107 -541.237,299.086 -544.006,299.07 -546.686,299.44 -549.259,300.088L-550.396,307.078C-552.989,308.052,-555.398,309.403,-557.514,311.117L-564.117,308.526C-567.886,312.318,-570.696,317.047,-572.198,322.354L-566.702,326.846C-566.924,328.172 -567.071,329.531 -567.083,330.919 -567.093,332.318 -566.962,333.672 -566.752,335.005L-572.311,339.427C-570.872,344.742,-568.124,349.518,-564.398,353.354L-557.769,350.851C-555.674,352.581,-553.284,353.971,-550.698,354.976L-549.656,361.976C-547.092,362.659 -544.416,363.065 -541.647,363.086 -538.875,363.096 -536.198,362.729 -533.63,362.086L-532.482,355.088C-529.891,354.114,-527.484,352.763,-525.362,351.062L-518.771,353.651C-514.998,349.851,-512.192,345.12,-510.687,339.82L-516.182,335.333C-515.959,333.997,-515.814,332.643,-515.802,331.242z M-541.53,344.336C-548.84,344.292 -554.737,338.318 -554.689,331 -554.641,323.68 -548.673,317.784 -541.354,317.833 -534.035,317.88 -528.139,323.851 -528.187,331.172 -528.235,338.495 -534.205,344.385 -541.53,344.336z" Stretch="Fill" Fill="Black" Opacity="0.2"/>
                </Grid>
                <!--<Button Content="Options" HorizontalAlignment="Right" VerticalAlignment="Bottom" Click="ButtonOptions_Click"/>-->
                <local:NotificationControl x:Name="NotificationControl" Visibility="Collapsed"/>
            </Grid>
        </metrostyleapps:DragAndDropRoot>
        <Grid x:Name="TrialAlert" Grid.Row="0" CacheMode="BitmapCache">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Offset="0.6" Color="Red"/>
                    <GradientStop Offset="1" Color="#FFCC0000"/>
                </LinearGradientBrush>
            </Grid.Background>
            <StackPanel Orientation="Vertical">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="Yellow" Margin="10,10,0,0" FontWeight="Bold" Text="{Binding LocalizedResources.TrialText1, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}"/>
                    <TextBlock Foreground="#FFFFFFFF" Margin="10,10,0,0" Text="{Binding LocalizedResources.TrialText2, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="#FFFFFFFF" Margin="10,3,0,0" Text="{Binding LocalizedResources.TrialText3, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}"/>
                    <Button Margin="-10,-15,0,-5" Click="ButtonBuyFullVersion_Click" BorderBrush="{x:Null}" Background="#88FFFFFF" Foreground="Yellow" HorizontalAlignment="Left" FontSize="20" Content="{Binding LocalizedResources.TrialButton_Content, Source={StaticResource ToDoCalendarControl_LocalizedStrings}}"/>
                </StackPanel>
                <!--<TextBlock Text="Trial will expire soon..." Foreground="White" Margin="10,10,0,0"/>-->
                <!--<Button Content="Trial will expire soon...&#13;Click to get the full version Now!" BorderBrush="{x:Null}" Foreground="White" HorizontalAlignment="Left" FontSize="20"/>-->
            </StackPanel>
            <Rectangle IsHitTestVisible="False" Height="20" Margin="0,0,0,-20" VerticalAlignment="Bottom" CacheMode="BitmapCache">
                <Rectangle.Fill>
                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                        <GradientStop Offset="0" Color="#44000000"/>
                        <GradientStop Offset="0.5" Color="#11000000"/>
                        <GradientStop Offset="1" Color="#00000000"/>
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>
        </Grid>
    </Grid>
</UserControl>